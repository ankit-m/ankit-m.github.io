{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/ui-testing-in-postman/","result":{"data":{"site":{"siteMetadata":{"title":"Ankit Muchhala","siteUrl":"https://ankit-m.github.io"}},"markdownRemark":{"id":"d00dc370-9538-53e8-9331-c104335c0634","excerpt":"Postman is a tool commonly used to work with APIs. It provides an easy way to make HTTP calls and run scripts during various phases of the request. We can…","html":"<p><a href=\"https://www.getpostman.com/\">Postman</a> is a tool commonly used to work with APIs. It provides an easy way to make HTTP calls and run scripts during various phases of the request. We can leverage these features for <strong>continuous and automated</strong> UI testing.</p>\n<p>This article outlines a few ways of using Postman to test various aspects of a UI viz. performance, functionality, security, integrity and accessibility. We will also look at how to run these tests periodically and get notified about the results.</p>\n<h2>0. Setup and Postman Primer</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/33ae76aa12e849044db606590f23a4f5/e8950/postman-primer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.291139240506325%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADAklEQVQ4yzVSy47kRBDsO3xDw8602+VnlV0vv122d1ngA7ggcViLAwekOU0L7bLdM9NaDSeE+Bv+CNRXDnjdFcjdcAhFZkQqDpm5+uP3/f2vvzzvPjw/3z8+Pu7evn23e/fz+937/X53OBx2x+Nxt3942D0djxdtfzjsDof9pf7tw353fHq6Pzw8/HQ8Hn+8u7v7dPXd6xpDW6PrOtRVhbau0JQFMq2hlEJRFJe+LgooKS+aVgpCSrxqS7x+2aOrCxhjZpYkn68SqT5qradSy6nL1fR1W09fNtXUaTXVgk+NSKdBpJMR6dQIftEWVIvH6ZQN3/yTfvUDOpn8SVO5XmklkStpk5RbJThEkoBSioQxUEahE4acUaT0CkpjsP/9OESU6nMsaqQ0PmV5sV45joPQ3VrHcSwNA4iEIQ4CsDBE7PmIfB80DBF6HiLfQ+R5oEEATimiIEDskzMLCPI0OSml1itCCAghduu6VtIIdZGjLjWqUiBXFDKNIHkIkYZQlEGwCJyFkDyCFBE4Z2cpGEqZnkTK1yvXdREQYiPiWuZ54DzGF0OKvmMYeo6+SzD0KYaFzcIpepOgW7hfPHF+2XNUmp04U9dAjxDrE9dSz4NUHK+GEnWToWkVurZEV2mYNkNpClRdgabJYcrlsjlqk5+XLyg5O3Gpr4EuIZa4ro19D0IKdMOApmnRNBUG02IwBtWyhrZC33To2g5tU6LOS7SmPVdVjVLykxDyGkj+C6S+Z3kibNtUtqpKmxWNLerMFsbYvC6tyrXVOrdalzbNCquK0qqyPossQybEKZPpJfDsuu5MXHemvjdzns5Fa+asaebMdLNo+1l3zay6bpZtf9Hzuph1ZebSLDPNx6wpIHn8l3frrFee5+ECQsCCAFowmHa5skJdSpjmur86T6FEDC0iKBFBixiZpCg0hRIUPAz+9on32coj7hvHccbbzWb0nc2YuM6YbDcj296ObLv0S+2M0WYzhjc3FwQ3NyNztyPd3I6J47yRQfB96pNv1y9efPIvma2RsgLDhYAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Postman basics\"\n        title=\"Postman basics\"\n        src=\"/static/33ae76aa12e849044db606590f23a4f5/f058b/postman-primer.png\"\n        srcset=\"/static/33ae76aa12e849044db606590f23a4f5/c26ae/postman-primer.png 158w,\n/static/33ae76aa12e849044db606590f23a4f5/6bdcf/postman-primer.png 315w,\n/static/33ae76aa12e849044db606590f23a4f5/f058b/postman-primer.png 630w,\n/static/33ae76aa12e849044db606590f23a4f5/40601/postman-primer.png 945w,\n/static/33ae76aa12e849044db606590f23a4f5/78612/postman-primer.png 1260w,\n/static/33ae76aa12e849044db606590f23a4f5/e8950/postman-primer.png 2000w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Postman primarily provides you with an environment to create and interact with APIs. It can also be used to request web pages (just like a browser). Enter the URL in the address bar and hit send to see the HTML response. Postman can run scripts before sending the request (<strong>Pre-request scripts</strong>) and after obtaining the response (<strong>Tests</strong>). Each request is stored in a _collection,_which can be run to execute all requests in order.</p>\n<p>If you have never used Postman, head over to the <a href=\"https://learning.getpostman.com/\">Learning Center</a> for more information.</p>\n<blockquote>\n<p><strong>Note</strong>: Postman does not evaluate JS or external CSS on a webpage. A few techniques described here might not work for pages which are rendered client side or which rely heavily on JavaScript.</p>\n</blockquote>\n<h2>1. Performance</h2>\n<p>Various factors affect the performance of a webpage — time to receive data from the server, first meaningful render, etc.</p>\n<p>/We will create a new request for each type of test and add the corresponding code snippets in the/<em>Tests</em>/tab. At any point, you can use the or directly import the in Postman./ <a href=\"https://documenter.getpostman.com/view/1411527/SW12zxWj\">reference collection</a> <a href=\"https://explore.postman.com/templates/4238\">template</a></p>\n<ul>\n<li><strong>Response time</strong>: This is the time it took for a client to receive the complete response (HTML in this case) after making the request. We can set maximum response time threshold.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> <span class=\"token constant\">ONE_SECOND</span> <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>“Response time is less than <span class=\"token number\">1</span> second”<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>responseTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">below</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ONE_SECOND</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>Headers</strong>: Response headers can be used to check server configuration for caching and encoding of the data. These help you improve the page load time and reduce number of bytes transmitted over the network.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>“Cache control header should be <span class=\"token keyword\">for</span> <span class=\"token number\">14</span> days”<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span>“Cache<span class=\"token operator\">-</span>Control”<span class=\"token punctuation\">,</span> “max<span class=\"token operator\">-</span>age<span class=\"token operator\">=</span><span class=\"token number\">1209600</span>”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>“Content encoding should be <span class=\"token keyword\">set</span> to gzip”<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span>“Content<span class=\"token operator\">-</span>Encoding”<span class=\"token punctuation\">,</span> “gzip”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>Response size</strong>: The actual size of your first response (HTML page).</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>“Response size is less than <span class=\"token number\">35</span>KB”<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>responseSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">below</span><span class=\"token punctuation\">(</span><span class=\"token number\">35000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>PageSpeed Insights API</strong>: Google provides a feature rich <a href=\"https://developers.google.com/speed/docs/insights/v5/get-started\">PageSpeed</a> API to evaluate the performance of any webpage. You can call the API from Postman and assert on the results to set benchmarks for your UI.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// GET https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url={{url}}</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>“PageSpeed score should be within <span class=\"token number\">90</span> and <span class=\"token number\">100</span>”<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> res <span class=\"token operator\">=</span> pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> score <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>lighthouseResult<span class=\"token punctuation\">.</span>categories<span class=\"token punctuation\">.</span>performance<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">;</span>\n\n  pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>score <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>be<span class=\"token punctuation\">.</span><span class=\"token function\">within</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>2. Functionality</h2>\n<ul>\n<li><strong>Status code</strong>: Response status is the most basic test for uptime. If the server returns an unexpected status code, your web page might not be working correctly.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Status code is 200\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>Page structure</strong>: You can evaluate the response markup for sanity checks using cheerio library. These can check for presence of necessary tags and critical elements.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cheerio\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Page title should be set\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ankit Muchhala\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Page should have header and footer tags\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"header\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>exist<span class=\"token punctuation\">;</span>\n  pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"footer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>exist<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>Headers</strong>: Basic tests can be written for response headers which determine the functionality of the webpage — <code class=\"language-text\">Content-Type</code>, <code class=\"language-text\">Set-Cookie</code>, etc.</li>\n<li><strong>Manifest</strong>: If you are building a web app/PWA to be installed on mobile devices, your application should serve a manifest.json file and have a corresponding link in the head tag.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Manifest file should exist\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"application/json\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Add more tests to check manifest file</span>\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Manifest should have valid fields\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> jsonData <span class=\"token operator\">=</span> pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ankit Muchhala\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>Service worker</strong>: If you have a service worker file, you can check for its existence and content.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Service worker file should exist\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\";\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">include</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"application/javascript\"</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>3. Security</h2>\n<ul>\n<li><strong>HTTPS and HSTS</strong>: If you want the communication between client and server to be secure, your webpage must be served over HTTPS. You also need to ensure that all insecure calls (HTTP) are redirected to the secure protocol. You can also set the <code class=\"language-text\">Strict-Transport-Security</code> header to tell the browsers to connect to your servers <strong>only</strong> through a secure protocol.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Response should have status code is 301\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">301</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Response should redirect to secure URL\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"Location\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"https://\"</span> <span class=\"token operator\">+</span> pm<span class=\"token punctuation\">.</span>environment<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"host\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Strict-Transport-Security header should be set\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"Strict-Transport-Security\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"max-age=300; includeSubDomains\"</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>Headers</strong>: There are security headers which you can utilize to achieve certain security benefits. Ex. <code class=\"language-text\">X-XSS-Protection</code>, <code class=\"language-text\">X-Frame-Options</code>, etc. You can find a complete list here and add tests for the ones you are using.</li>\n<li><strong>No referrer</strong>: You can also run some sanity tests on the HTML to check for common security issues — using <code class=\"language-text\">eval</code>, unnecessary <code class=\"language-text\">iframes</code> or inline JavaScript. One such test is to verify that all <code class=\"language-text\">a</code> tags with <code class=\"language-text\">target=&quot;_blank&quot;</code> (i.e. links which open in a new tab/window) have <code class=\"language-text\">rel=&quot;noopener noreferrer&quot;</code>. This means that the newly opened tab will not have access your webpage via <code class=\"language-text\">document.referrer</code>.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cheerio\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"All external ... valid attributed\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">i<span class=\"token punctuation\">,</span> elem</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"target\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token string\">\"_blank\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rel\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"noopener noreferrer\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>Robots.txt</strong>: This file resides at the root level <code class=\"language-text\">/robots.txt</code> and specifies how web crawlers (like Google’s bot) should interact with your webpages. Even though it does not <strong>enforce</strong> anything — evil bots might simply ignore — it is a good practice to have a <code class=\"language-text\">robots.txt</code> file which clearly denotes which routes are allowed to be crawled.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"robots.txt file should exist\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// add specific tests for your robots.txt file</span></code></pre></div>\n<h2>4. Integrity</h2>\n<p>These tests verify that your webpage is serving data from verified sources and links to pages which are valid.</p>\n<ul>\n<li><strong>Link validity</strong>: Often you want to verify that all links in your page are valid and that they don’t lead the user to a webpage which is unavailable. The following script finds all the links in your webpage and checks if they exist (i.e. making a <code class=\"language-text\">GET</code> request returns a <code class=\"language-text\">200</code> status code). We make use of the <strong>pm.sendRequest</strong> method here.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cheerio\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>pm<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"All links on the page should be valid\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">i<span class=\"token punctuation\">,</span> elem</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> originalPath <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> path <span class=\"token operator\">=</span> originalPath<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>path <span class=\"token operator\">&amp;&amp;</span> path<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      path <span class=\"token operator\">=</span> pm<span class=\"token punctuation\">.</span>environment<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"url\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> path<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    pm<span class=\"token punctuation\">.</span><span class=\"token function\">sendRequest</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'Link with href \"'</span> <span class=\"token operator\">+</span> originalPath <span class=\"token operator\">+</span> <span class=\"token string\">'\" should be valid'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">property</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"code\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          pm<span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span>have<span class=\"token punctuation\">.</span><span class=\"token function\">property</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"OK\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><strong>CSP</strong>: Content Security Policy headers specify a list of valid sources for different types of content which the browser can execute. For example, you can say — allow JavaScript to be loaded from the current domain (<code class=\"language-text\">self</code>) and <code class=\"language-text\">getpostman.com</code>. The browser will block other sources from executing content. This helps safeguard your application in case someone has injected malicious code into it. <strong>Note: CSP checks are browser dependent and should not be used as a sole line of defence.</strong></li>\n</ul>\n<h2>5. Accessibility</h2>\n<p>All modern webpages are expected to be mobile friendly and accessible for users with disabilities. This means using semantically correct HTML tags, ARIA labels and relevant attributes like <code class=\"language-text\">alt</code> or <code class=\"language-text\">role</code>. As illustrated before, you can use cheerio to write tests for these.</p>\n<hr>\n<h2>Running your Tests</h2>\n<p>There are multiple ways to run your collection.</p>\n<h3>In Postman</h3>\n<ul>\n<li>Click on your collection in the sidebar</li>\n<li>Click on Run. This opens the Collection Runner</li>\n<li>Configure your options and Run!</li>\n</ul>\n<figure>\n  <img src=\"/460f152f43d67fe787a623719c051a9c/collection-runner.gif\" alt=\"Running tests via Collection Runner\">\n  <figcaption>Running tests via Collection Runner</figcaption>\n</figure>\n<h3>In CLI</h3>\n<p>You can run the collection in CLI using newman using newman run command.</p>\n<figure>\n  <img src=\"/89f56d610aa89d254f8d2c0d712dd1f4/newman.gif\" alt=\"Taken from Postman Learning Center\">\n  <figcaption>Taken from Postman Learning Center</figcaption>\n</figure>\n<h3>In Postman Monitors</h3>\n<p>You can setup a monitor to run your tests periodically and also pipe those results to slack.</p>\n<p>There are a lot of other tests which can be performed on web pages in Postman. If you have any in mind, please let me know in the comments.</p>","frontmatter":{"title":"UI Testing with Postman","date":"November 01, 2019","description":"Postman is a great tool to build and test APIs. However, it can also be used to test and monitor your websites. Read more to learn how to maintain your web applications.","image":null}},"previous":{"fields":{"slug":"/why-should-i-write-good-commit-messages/"},"frontmatter":{"title":"Why should I write good commit messages?"}},"next":{"fields":{"slug":"/project-phoenix-review/"},"frontmatter":{"title":"The Project Phoenix - Book Review"}}},"pageContext":{"id":"d00dc370-9538-53e8-9331-c104335c0634","previousPostId":"6dccb1fc-948d-5b48-b9f9-e2de8acf85e4","nextPostId":"c252f1e6-1765-5290-845e-226401935769"}},"staticQueryHashes":["2841359383","3257411868"]}